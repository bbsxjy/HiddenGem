# èµ„é‡‘æ›²çº¿è¯Šæ–­æŒ‡å—

## é—®é¢˜ç°è±¡
èµ„é‡‘æ›²çº¿æ˜¾ç¤ºä¸ºæ°´å¹³ç›´çº¿ï¼Œå°½ç®¡æ•°æ®æ˜¾ç¤ºæœ‰90%çš„å¢é•¿ï¼ˆ100K â†’ 190Kï¼‰

## è¯Šæ–­æ­¥éª¤

### 1. åˆ·æ–°æµè§ˆå™¨å¹¶æ‰“å¼€æ§åˆ¶å°
æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰ï¼Œåˆ‡æ¢åˆ°Consoleæ ‡ç­¾é¡µ

### 2. è¿è¡Œå›æµ‹å¹¶æŸ¥çœ‹æ§åˆ¶å°è¾“å‡º

ä½ åº”è¯¥çœ‹åˆ°ä»¥ä¸‹è°ƒè¯•ä¿¡æ¯ï¼š

```
ğŸ” EquityCurveChart - æ¥æ”¶åˆ°çš„åŸå§‹æ•°æ®: {
  dataLength: 209,
  firstPoint: { date: "2025-01-02", value: 100000 },
  lastPoint: { date: "2025-12-31", value: 190514 },
  sampleDates: ["2025-01-02", "2025-01-03", ...],
  sampleValues: [100000, 100000, ...],
  initialCapital: 100000
}

ğŸ” mappedData sample: {
  first: { date: "2025-01-02", value: 100000, return_pct: 0 },
  last: { date: "2025-12-31", value: 190514, return_pct: 90.51 },
  dateType: "string",
  valueType: "number",
  allDatesUnique: true
}

ğŸ” Y-axis and final data: {
  valueRange: { min: 90234, max: 199567 },
  domain: [81210.6, 208523.4],
  chartDataLength: 209,
  tradePointsLength: 5
}

ğŸ” Before render: {
  chartDataLength: 209,
  hasData: true,
  firstDate: "2025-01-02",
  lastDate: "2025-12-31",
  firstValue: 100000,
  lastValue: 190514,
  lineColor: "#16a34a",
  yAxisDomain: [81210.6, 208523.4]
}
```

### 3. æ£€æŸ¥å…³é”®æ•°æ®ç‚¹

è¯·æ£€æŸ¥å¹¶å¤åˆ¶æ§åˆ¶å°ä¸­çš„ä»¥ä¸‹ä¿¡æ¯ï¼š

#### âœ… æ­£å¸¸æ•°æ®ç‰¹å¾ï¼š
- `dataLength` > 0
- `firstPoint.date` æ ¼å¼ä¸º "YYYY-MM-DD"
- `value` æ˜¯æ•°å­—ç±»å‹ï¼ˆnumberï¼‰ï¼Œä¸æ˜¯å­—ç¬¦ä¸²
- `dateType: "string"`
- `valueType: "number"`
- `allDatesUnique: true` ï¼ˆæ‰€æœ‰æ—¥æœŸéƒ½æ˜¯å”¯ä¸€çš„ï¼‰
- `min` å’Œ `max` æœ‰æ˜æ˜¾å·®å¼‚

#### âŒ å¯èƒ½çš„é—®é¢˜ï¼š
- `value` æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼ˆ"100000"ï¼‰è€Œä¸æ˜¯æ•°å­—ï¼ˆ100000ï¼‰
- æ‰€æœ‰çš„valueéƒ½ç›¸åŒ
- æ—¥æœŸæ ¼å¼ä¸æ˜¯"YYYY-MM-DD"
- `allDatesUnique: false` ï¼ˆæœ‰é‡å¤æ—¥æœŸï¼‰

### 4. æ£€æŸ¥å›¾è¡¨æ¸²æŸ“

åœ¨æ§åˆ¶å°è¾“å…¥ä»¥ä¸‹å‘½ä»¤æ¥æ£€æŸ¥Rechartsæ˜¯å¦æ­£ç¡®æ¥æ”¶æ•°æ®ï¼š

```javascript
// æ‰¾åˆ°å›¾è¡¨çš„SVGå…ƒç´ 
document.querySelector('.recharts-wrapper')

// æ£€æŸ¥æ˜¯å¦æœ‰Lineè·¯å¾„
document.querySelector('.recharts-line path')

// æ£€æŸ¥è·¯å¾„çš„då±æ€§ï¼ˆåº”è¯¥æœ‰Må’ŒLå‘½ä»¤ï¼‰
document.querySelector('.recharts-line path').getAttribute('d')
```

#### âœ… æ­£å¸¸æƒ…å†µï¼š
- è·¯å¾„då±æ€§åŒ…å«å¤šä¸ªåæ ‡ç‚¹ï¼Œå¦‚ï¼š`M 50,200 L 100,180 L 150,150 ...`
- åæ ‡ç‚¹çš„Yå€¼åº”è¯¥æœ‰å˜åŒ–

#### âŒ é—®é¢˜æƒ…å†µï¼š
- è·¯å¾„då±æ€§æ˜¯ä¸€æ¡ç›´çº¿ï¼Œæ‰€æœ‰Yå€¼ç›¸åŒï¼š`M 50,200 L 100,200 L 150,200 ...`
- æ²¡æœ‰æ‰¾åˆ°pathå…ƒç´ 

### 5. å¯èƒ½çš„åŸå› å’Œè§£å†³æ–¹æ¡ˆ

#### é—®é¢˜1ï¼šæ•°æ®ç±»å‹é”™è¯¯
**ç—‡çŠ¶**ï¼š`valueType: "string"` è€Œä¸æ˜¯ `"number"`
**è§£å†³**ï¼šéœ€è¦åœ¨BacktestTab.tsxä¸­è½¬æ¢æ•°æ®æ—¶ç¡®ä¿valueæ˜¯æ•°å­—ç±»å‹

#### é—®é¢˜2ï¼šæ—¥æœŸæ ¼å¼é—®é¢˜
**ç—‡çŠ¶**ï¼šæ—¥æœŸä¸æ˜¯"YYYY-MM-DD"æ ¼å¼
**è§£å†³**ï¼šæ£€æŸ¥åç«¯è¿”å›çš„æ—¥æœŸæ ¼å¼

#### é—®é¢˜3ï¼šé‡å¤æ—¥æœŸ
**ç—‡çŠ¶**ï¼š`allDatesUnique: false`
**è§£å†³**ï¼šåç«¯æ•°æ®å¯èƒ½æœ‰é‡å¤æ—¥æœŸï¼Œå¯¼è‡´Rechartsç»˜å›¾æ··ä¹±

#### é—®é¢˜4ï¼šç©ºä»“æœŸå‹ç¼©
**ç—‡çŠ¶**ï¼šå‰38%çš„æ•°æ®éƒ½æ˜¯100000ï¼Œå¯¼è‡´è§†è§‰å‹ç¼©
**å½“å‰çŠ¶æ€**ï¼šå·²ç§»é™¤è¿‡æ»¤é€»è¾‘ï¼Œåº”è¯¥æ˜¾ç¤ºå®Œæ•´æ•°æ®

### 6. æŠ¥å‘Šé—®é¢˜

è¯·å°†ä»¥ä¸‹ä¿¡æ¯å‘é€ç»™æˆ‘ï¼š

```
ğŸ” æ§åˆ¶å°è¾“å‡ºï¼š
[ç²˜è´´æ‰€æœ‰ğŸ”å¼€å¤´çš„è°ƒè¯•ä¿¡æ¯]

ğŸ” å›¾è¡¨è·¯å¾„æ£€æŸ¥ï¼š
document.querySelector('.recharts-line path').getAttribute('d') =
[ç²˜è´´è·¯å¾„då±æ€§çš„å‰200ä¸ªå­—ç¬¦]

ğŸ” æˆªå›¾ï¼š
[å¦‚æœå¯èƒ½ï¼Œæä¾›æˆªå›¾]
```

## å¿«é€Ÿæ£€æŸ¥è„šæœ¬

åœ¨æµè§ˆå™¨æ§åˆ¶å°è¿è¡Œä»¥ä¸‹è„šæœ¬è¿›è¡Œå¿«é€Ÿè¯Šæ–­ï¼š

```javascript
// å¿«é€Ÿè¯Šæ–­è„šæœ¬
const path = document.querySelector('.recharts-line path');
if (!path) {
  console.error('âŒ æœªæ‰¾åˆ°å›¾è¡¨è·¯å¾„å…ƒç´ ï¼');
} else {
  const d = path.getAttribute('d');
  const coords = d.match(/[ML]\s*[\d.]+\s*[\d.]+/g) || [];
  const yValues = coords.map(c => parseFloat(c.split(/\s+/)[2]));
  const uniqueY = new Set(yValues);

  console.log('ğŸ“Š å›¾è¡¨è·¯å¾„è¯Šæ–­:', {
    æ€»åæ ‡ç‚¹æ•°: coords.length,
    Yå€¼èŒƒå›´: `${Math.min(...yValues).toFixed(2)} - ${Math.max(...yValues).toFixed(2)}`,
    å”¯ä¸€Yå€¼æ•°é‡: uniqueY.size,
    æ˜¯å¦æ˜¯ç›´çº¿: uniqueY.size === 1 ? 'âŒ æ˜¯ï¼æ‰€æœ‰Yå€¼ç›¸åŒ' : 'âœ… å¦ï¼ŒYå€¼æœ‰å˜åŒ–',
    å‰5ä¸ªåæ ‡: coords.slice(0, 5)
  });
}
```
