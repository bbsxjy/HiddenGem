# Tushare Pro API需求分析 - HiddenGem项目

## 项目目标
为中低频量化交易（波段交易：数天到数周，趋势跟踪：数周到数月）提供**真实可靠的买卖时机建议**。

---

## 当前状态（免费Token）

### ✅ 已可用的API
- **daily** - 日线行情（OHLCV）- 核心数据 ✓
- **stock_basic** - 股票列表
- **stock_company** - 公司信息
- **share_float** - 限售股解禁（部分可用）

### ❌ 需要积分的API（当前无法使用）
- **daily_basic** - 每日指标（PE、PB、换手率、流通市值等）
- **fina_indicator** - 财务指标（ROE、负债率等）
- **pledge_stat** - 股权质押统计
- **index_daily** - 指数行情
- **moneyflow_hsgt** - 北向资金流向
- **margin** - 融资融券数据

---

## 7个Agent的数据需求分析

### 1. 📊 Technical Analysis Agent（技术分析）
**目标**：提供技术面买卖信号

**数据需求**：
- ✅ **daily** - 日线OHLCV（已有）
  - 计算RSI、MACD、MA、布林带、KDJ等技术指标
  - 这是技术分析的核心，已经足够！

**结论**：✅ **免费token足够** - 技术分析完全可以基于日线数据工作

---

### 2. 💰 Fundamental Agent（基本面分析）
**目标**：评估股票估值和财务健康度

**当前状况**：
- ❌ 无法获取PE/PB/ROE等关键指标
- ❌ 无法评估公司财务健康度

**必需的API**：
1. ⭐⭐⭐ **daily_basic** (120积分) - 每日基本指标
   - PE、PB、PS、市值、换手率
   - **这是估值分析的基础！**

2. ⭐⭐⭐ **fina_indicator** (120积分) - 财务指标
   - ROE、负债率、流动比率、速动比率
   - **判断公司财务健康的核心数据！**

**结论**：❌ **当前几乎无法工作** - 基本面分析需要这些API

---

### 3. ⚠️ Risk Agent（风险管理）
**目标**：识别A股特有风险（质押、解禁、ST等）

**当前状况**：
- ❌ 无法获取股权质押数据
- ✅ 可以计算波动率（基于日线价格）
- ✅ 可以计算流动性（基于成交量）

**必需的API**：
1. ⭐⭐ **pledge_stat** (120积分) - 股权质押统计
   - 质押比例>50%是重大风险信号
   - **A股特色风险，重要但非核心**

2. ⭐ **share_float** - 限售股解禁（部分可用）
   - 大规模解禁可能导致抛压

**结论**：⚠️ **部分可工作** - 基于价格的风险指标可用，但缺少A股特有风险数据

---

### 4. 📈 Market Agent（市场监控）
**目标**：判断市场整体环境（牛市/熊市/盘整）

**当前状况**：
- ❌ 无法获取指数数据
- ❌ 无法获取北向资金流向
- ❌ 无法获取融资融券数据

**必需的API**：
1. ⭐⭐⭐ **index_daily** (需要积分) - 指数行情
   - 分析上证指数、深证成指走势
   - **判断市场阶段的核心数据！**

2. ⭐⭐ **moneyflow_hsgt** (2000积分) - 北向资金
   - 外资流向是重要的市场情绪指标

3. ⭐ **margin** (需要积分) - 融资融券
   - 市场情绪和杠杆水平

**结论**：❌ **当前无法有效工作** - 只能返回"数据不可用"

---

### 5. 📰 Sentiment Agent（情绪分析）
**目标**：分析市场情绪和舆情

**数据需求**：
- 新闻、社交媒体数据（Tushare不提供）
- 可能需要第三方情绪数据源

**结论**：🤷 **与Tushare积分无关** - 需要其他数据源

---

### 6. 📋 Policy Agent（政策分析）
**目标**：分析政策面影响

**数据需求**：
- 政策新闻、行业监管信息（Tushare不提供）

**结论**：🤷 **与Tushare积分无关** - 需要其他数据源

---

### 7. ⚡ Execution Agent（执行代理）
**目标**：生成最终交易信号

**数据需求**：
- 依赖前面6个agent的分析结果
- 自身不直接使用Tushare API

**结论**：✅ **不需要额外API**

---

## 🎯 最终推荐方案

### 方案A：最小可行配置（120积分）💰
**成本**：120积分（约120元充值，或通过分享获得）

**开通API**：
1. ⭐⭐⭐ **daily_basic** - 每日指标（PE/PB/换手率/市值）
2. ⭐⭐⭐ **fina_indicator** - 财务指标（ROE/负债率）

**可实现**：
- ✅ Technical Agent：完全工作（基于已有daily数据）
- ✅ Fundamental Agent：完全工作（有了PE/PB/ROE）
- ⚠️ Risk Agent：部分工作（价格波动+流动性，缺质押数据）
- ❌ Market Agent：无法工作（需要指数数据）
- ❌ Sentiment/Policy Agent：需要其他数据源

**买卖建议质量**：⭐⭐⭐☆☆（60分）
- 技术面+基本面+个股风险 = 可以提供**基本的买卖建议**
- 缺少市场环境判断（可能在熊市中也推荐买入）

---

### 方案B：推荐配置（500-2000积分）💰💰
**成本**：500-2000积分（约500-2000元充值）

**开通API**：
- 方案A的所有API +
3. ⭐⭐ **index_daily** - 指数数据（判断市场阶段）
4. ⭐⭐ **pledge_stat** - 股权质押（A股特有风险）
5. ⭐ **moneyflow_hsgt** - 北向资金（市场情绪）

**可实现**：
- ✅ Technical Agent：完全工作
- ✅ Fundamental Agent：完全工作
- ✅ Risk Agent：完全工作
- ✅ Market Agent：完全工作
- ❌ Sentiment/Policy Agent：需要其他数据源

**买卖建议质量**：⭐⭐⭐⭐☆（80分）
- 技术面+基本面+风险控制+市场环境 = **可靠的买卖建议**
- 可以判断市场阶段，避免熊市逆势操作

---

### 方案C：免费方案（0积分）🎯 推荐先试用
**成本**：0元

**可用功能**：
- ✅ Technical Agent（技术分析）：完全可用
- ✅ 简化版Risk Agent（波动率+流动性）：部分可用

**买卖建议质量**：⭐⭐☆☆☆（40分）
- 纯技术面交易 = **短期可用，但风险较高**
- 缺乏基本面和市场环境判断

**适合场景**：
- 测试系统功能
- 验证技术架构
- 短线技术面交易（仅适合有经验的交易者）

---

## 💡 我的建议

### 第一步：现在就可以做（免费token）
1. ✅ **完善Technical Agent** - 基于日线数据完全可用
2. ✅ **完善Risk Agent的价格风险部分** - 波动率、流动性分析
3. ✅ **测试系统的其他功能** - 订单管理、组合管理、回测等
4. ✅ **验证整体架构** - 确保系统正常运行

**这样你可以先用起来，验证系统价值！**

---

### 第二步：充值120积分（必要投资）
**如果系统验证有价值，建议尽快充值120积分**

**原因**：
1. 没有基本面数据（PE/PB/ROE）的量化系统是**不完整的**
2. 120积分成本低（约120元），但带来的价值大：
   - Fundamental Agent可以工作
   - 可以筛选低估值股票
   - 可以评估公司财务健康度
3. 从40分提升到60分的**性价比最高**

---

### 第三步：根据实际效果决定是否继续充值
- 如果系统表现好 → 考虑充值到500-2000积分（获得完整功能）
- 如果120积分够用 → 保持现状
- 如果发现其他需求 → 根据需要调整

---

## 🔑 关键结论

### 当前状态（免费token）
- ✅ **Technical Agent可用** - 技术分析是量化交易的基础
- ❌ **Fundamental Agent不可用** - 缺乏估值和财务数据
- ❌ **Market Agent不可用** - 无法判断市场环境
- ⚠️ **系统可以运行，但买卖建议质量较低**

### 最低投资建议：120积分
- 获得 **daily_basic** + **fina_indicator**
- 使系统具备**完整的个股分析能力**（技术+基本面+风险）
- **性价比最高**的升级方案

### 完整功能建议：500-2000积分
- 增加 **index_daily** + **pledge_stat** + **moneyflow_hsgt**
- 使系统具备**市场环境判断能力**
- 适合**认真做量化交易**的用户

---

## 📊 Tushare积分获取方式

1. **充值**：1元 = 1积分（最快）
2. **分享邀请**：邀请好友注册可获得积分
3. **社区贡献**：提交数据、改进建议等
4. **活动获取**：关注官方活动

**建议**：如果认真使用系统，直接充值120积分是最高效的方式。

---

## ❓ 如何验证是否需要充值？

### 免费方案测试清单（1-2周）
1. ✅ 使用Technical Agent分析几只股票
2. ✅ 运行回测看技术面策略的表现
3. ✅ 体验系统的订单管理、组合管理功能
4. ✅ 观察系统是否真的帮你找到交易机会

### 如果发现以下情况，建议充值：
- ❌ 技术信号频繁但不知道基本面是否健康
- ❌ 想知道股票是否被高估/低估
- ❌ 想过滤掉财务风险高的公司
- ❌ 想知道当前是牛市还是熊市

**这时候120积分的投资就很值得！**

---

## 总结

**免费token可以让系统"跑起来"，但要真正"用起来"，建议至少充值120积分。**

你觉得这个分析合理吗？我可以帮你：
1. 先完善免费版能做的功能（Technical Agent）
2. 或者帮你准备充值后需要修改的代码
3. 或者创建一个"充值前vs充值后"的对比演示
