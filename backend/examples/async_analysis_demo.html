<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¼‚æ­¥AIåˆ†æ - æ¼”ç¤º</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .card {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .card h2 {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #333;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #555;
        }

        .input-group input,
        .input-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .input-group input:focus,
        .input-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        button {
            flex: 1;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-secondary {
            background: #f5f5f5;
            color: #333;
        }

        .btn-secondary:hover:not(:disabled) {
            background: #e0e0e0;
        }

        .btn-danger {
            background: #ef4444;
            color: white;
        }

        .btn-danger:hover {
            background: #dc2626;
        }

        .progress-container {
            display: none;
            margin-top: 20px;
        }

        .progress-container.active {
            display: block;
        }

        .progress-bar {
            width: 100%;
            height: 40px;
            background: #f0f0f0;
            border-radius: 20px;
            overflow: hidden;
            position: relative;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        .progress-text {
            text-align: center;
            color: #666;
            margin-top: 5px;
        }

        .task-info {
            background: #f9fafb;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            font-size: 0.9rem;
        }

        .task-info p {
            margin: 5px 0;
        }

        .task-info strong {
            color: #333;
        }

        .result-container {
            display: none;
            margin-top: 20px;
        }

        .result-container.active {
            display: block;
        }

        .result-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            border-bottom: 2px solid #e0e0e0;
        }

        .result-tab {
            padding: 10px 20px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-weight: 500;
            color: #666;
            transition: all 0.3s;
        }

        .result-tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }

        .result-content {
            display: none;
        }

        .result-content.active {
            display: block;
        }

        .json-viewer {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            overflow-x: auto;
            max-height: 500px;
            overflow-y: auto;
        }

        .agent-card {
            background: #f9fafb;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 4px solid #667eea;
        }

        .agent-card h3 {
            font-size: 1.1rem;
            margin-bottom: 10px;
            color: #333;
        }

        .agent-card .direction {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-right: 10px;
        }

        .direction.long {
            background: #10b981;
            color: white;
        }

        .direction.short {
            background: #ef4444;
            color: white;
        }

        .direction.hold {
            background: #f59e0b;
            color: white;
        }

        .error-message {
            background: #fef2f2;
            border: 1px solid #fecaca;
            color: #dc2626;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }

        .success-message {
            background: #f0fdf4;
            border: 1px solid #bbf7d0;
            color: #16a34a;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }

        .logs {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 15px;
        }

        .log-entry {
            margin: 5px 0;
            padding: 5px;
            border-left: 3px solid #667eea;
            padding-left: 10px;
        }

        .connection-status {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .connection-status.connected {
            background: #10b981;
        }

        .connection-status.disconnected {
            background: #ef4444;
        }

        .method-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .method-option {
            flex: 1;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .method-option:hover {
            border-color: #667eea;
        }

        .method-option.selected {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .method-option h4 {
            font-size: 1rem;
            margin-bottom: 5px;
            color: #333;
        }

        .method-option p {
            font-size: 0.85rem;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš€ å¼‚æ­¥AIåˆ†ææ¼”ç¤º</h1>
            <p>ä½“éªŒéé˜»å¡ã€å¹¶å‘çš„AIè‚¡ç¥¨åˆ†æç³»ç»Ÿ</p>
        </div>

        <!-- é…ç½®å¡ç‰‡ -->
        <div class="card">
            <h2>ğŸ“ åˆ†æé…ç½®</h2>

            <div class="input-group">
                <label for="apiBaseUrl">APIåœ°å€:</label>
                <input type="text" id="apiBaseUrl" value="http://localhost:8000" placeholder="http://localhost:8000">
            </div>

            <div class="input-group">
                <label for="symbol">è‚¡ç¥¨ä»£ç :</label>
                <input type="text" id="symbol" value="600519.SH" placeholder="600519.SH / 000001.SZ / NVDA">
            </div>

            <div class="input-group">
                <label for="tradeDate">äº¤æ˜“æ—¥æœŸ (å¯é€‰):</label>
                <input type="date" id="tradeDate">
            </div>

            <div class="input-group">
                <label>è¿›åº¦è·å–æ–¹å¼:</label>
                <div class="method-selector">
                    <div class="method-option selected" data-method="sse">
                        <h4>SSE (æ¨è)</h4>
                        <p>é¡µé¢åˆ·æ–°å‹å¥½</p>
                    </div>
                    <div class="method-option" data-method="websocket">
                        <h4>WebSocket</h4>
                        <p>å®æ—¶æ€§æœ€å¥½</p>
                    </div>
                    <div class="method-option" data-method="polling">
                        <h4>è½®è¯¢</h4>
                        <p>å…¼å®¹æ€§æœ€å¥½</p>
                    </div>
                </div>
            </div>

            <div class="button-group">
                <button class="btn-primary" id="startBtn">ğŸš€ å¼€å§‹åˆ†æ</button>
                <button class="btn-danger" id="cancelBtn" disabled>âŒ å–æ¶ˆä»»åŠ¡</button>
                <button class="btn-secondary" id="listTasksBtn">ğŸ“‹ æŸ¥çœ‹æ‰€æœ‰ä»»åŠ¡</button>
            </div>

            <!-- è¿›åº¦æ˜¾ç¤º -->
            <div class="progress-container" id="progressContainer">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%">
                        <span id="progressText">0%</span>
                    </div>
                </div>
                <div class="progress-text" id="progressMessage">å‡†å¤‡ä¸­...</div>

                <div class="task-info" id="taskInfo">
                    <p><strong>ä»»åŠ¡ID:</strong> <span id="taskIdDisplay">-</span></p>
                    <p><strong>çŠ¶æ€:</strong> <span id="statusDisplay">-</span></p>
                    <p>
                        <strong>è¿æ¥çŠ¶æ€:</strong>
                        <span class="connection-status disconnected" id="connectionStatus"></span>
                        <span id="connectionText">æœªè¿æ¥</span>
                    </p>
                </div>
            </div>
        </div>

        <!-- ç»“æœå¡ç‰‡ -->
        <div class="card result-container" id="resultContainer">
            <h2>ğŸ“Š åˆ†æç»“æœ</h2>

            <div class="result-tabs">
                <button class="result-tab active" data-tab="summary">æ‘˜è¦</button>
                <button class="result-tab" data-tab="agents">Agentåˆ†æ</button>
                <button class="result-tab" data-tab="raw">åŸå§‹æ•°æ®</button>
            </div>

            <div class="result-content active" id="summaryContent">
                <div id="summaryDisplay"></div>
            </div>

            <div class="result-content" id="agentsContent">
                <div id="agentsDisplay"></div>
            </div>

            <div class="result-content" id="rawContent">
                <pre class="json-viewer" id="rawDataDisplay"></pre>
            </div>
        </div>

        <!-- æ—¥å¿—å¡ç‰‡ -->
        <div class="card">
            <h2>ğŸ“œ æ“ä½œæ—¥å¿—</h2>
            <div class="logs" id="logs"></div>
        </div>
    </div>

    <script>
        // å…¨å±€çŠ¶æ€
        let currentTaskId = null;
        let currentMethod = 'sse';
        let eventSource = null;
        let ws = null;
        let pollingInterval = null;

        // DOMå…ƒç´ 
        const apiBaseUrlInput = document.getElementById('apiBaseUrl');
        const symbolInput = document.getElementById('symbol');
        const tradeDateInput = document.getElementById('tradeDate');
        const startBtn = document.getElementById('startBtn');
        const cancelBtn = document.getElementById('cancelBtn');
        const listTasksBtn = document.getElementById('listTasksBtn');
        const progressContainer = document.getElementById('progressContainer');
        const resultContainer = document.getElementById('resultContainer');
        const progressFill = document.getElementById('progressFill');
        const progressText = document.getElementById('progressText');
        const progressMessage = document.getElementById('progressMessage');
        const taskIdDisplay = document.getElementById('taskIdDisplay');
        const statusDisplay = document.getElementById('statusDisplay');
        const connectionStatus = document.getElementById('connectionStatus');
        const connectionText = document.getElementById('connectionText');
        const logs = document.getElementById('logs');

        // æ–¹æ³•é€‰æ‹©å™¨
        document.querySelectorAll('.method-option').forEach(option => {
            option.addEventListener('click', () => {
                document.querySelectorAll('.method-option').forEach(opt => opt.classList.remove('selected'));
                option.classList.add('selected');
                currentMethod = option.dataset.method;
                addLog(`åˆ‡æ¢åˆ° ${option.querySelector('h4').textContent} æ¨¡å¼`);
            });
        });

        // æ ‡ç­¾é¡µåˆ‡æ¢
        document.querySelectorAll('.result-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                const tabName = tab.dataset.tab;

                document.querySelectorAll('.result-tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.result-content').forEach(c => c.classList.remove('active'));

                tab.classList.add('active');
                document.getElementById(tabName + 'Content').classList.add('active');
            });
        });

        // æ·»åŠ æ—¥å¿—
        function addLog(message) {
            const time = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.className = 'log-entry';
            logEntry.textContent = `[${time}] ${message}`;
            logs.insertBefore(logEntry, logs.firstChild);

            // é™åˆ¶æ—¥å¿—æ•°é‡
            while (logs.children.length > 50) {
                logs.removeChild(logs.lastChild);
            }
        }

        // æ›´æ–°è¿›åº¦
        function updateProgress(progress, message = '') {
            progressFill.style.width = `${progress}%`;
            progressText.textContent = `${progress}%`;
            if (message) {
                progressMessage.textContent = message;
            }
        }

        // æ›´æ–°è¿æ¥çŠ¶æ€
        function updateConnectionStatus(connected) {
            if (connected) {
                connectionStatus.classList.remove('disconnected');
                connectionStatus.classList.add('connected');
                connectionText.textContent = 'å·²è¿æ¥';
            } else {
                connectionStatus.classList.remove('connected');
                connectionStatus.classList.add('disconnected');
                connectionText.textContent = 'æœªè¿æ¥';
            }
        }

        // å¼€å§‹åˆ†æ
        async function startAnalysis() {
            const apiBaseUrl = apiBaseUrlInput.value;
            const symbol = symbolInput.value;
            const tradeDate = tradeDateInput.value;

            if (!symbol) {
                alert('è¯·è¾“å…¥è‚¡ç¥¨ä»£ç ');
                return;
            }

            try {
                addLog(`å¼€å§‹åˆ†æ ${symbol}...`);

                // åˆ›å»ºä»»åŠ¡
                const url = `${apiBaseUrl}/api/v1/agents/analyze-all-async/${symbol}`;
                const params = tradeDate ? `?trade_date=${tradeDate}` : '';

                const response = await fetch(url + params, { method: 'POST' });
                const data = await response.json();

                if (!data.success) {
                    throw new Error(data.error || 'åˆ›å»ºä»»åŠ¡å¤±è´¥');
                }

                currentTaskId = data.task_id;
                taskIdDisplay.textContent = currentTaskId;
                statusDisplay.textContent = 'running';

                addLog(`ä»»åŠ¡åˆ›å»ºæˆåŠŸ: ${currentTaskId}`);

                // æ˜¾ç¤ºè¿›åº¦
                progressContainer.classList.add('active');
                resultContainer.classList.remove('active');
                startBtn.disabled = true;
                cancelBtn.disabled = false;

                // æ ¹æ®é€‰æ‹©çš„æ–¹æ³•ç›‘å¬è¿›åº¦
                switch (currentMethod) {
                    case 'sse':
                        startSSEMonitoring(apiBaseUrl, currentTaskId);
                        break;
                    case 'websocket':
                        startWebSocketMonitoring(apiBaseUrl, currentTaskId);
                        break;
                    case 'polling':
                        startPollingMonitoring(apiBaseUrl, currentTaskId);
                        break;
                }

            } catch (error) {
                addLog(`é”™è¯¯: ${error.message}`);
                alert(`åˆ†æå¤±è´¥: ${error.message}`);
                resetUI();
            }
        }

        // SSEç›‘å¬
        function startSSEMonitoring(apiBaseUrl, taskId) {
            const url = `${apiBaseUrl}/api/v1/agents/tasks/${taskId}/stream`;
            addLog(`è¿æ¥SSE: ${url}`);

            eventSource = new EventSource(url);

            eventSource.addEventListener('message', (event) => {
                const data = JSON.parse(event.data);

                switch (data.type) {
                    case 'start':
                        updateConnectionStatus(true);
                        addLog(`SSEè¿æ¥æˆåŠŸ`);
                        break;

                    case 'progress':
                        updateProgress(data.progress, data.message);
                        addLog(`è¿›åº¦: ${data.progress}% - ${data.message}`);
                        break;

                    case 'complete':
                        updateProgress(100, 'åˆ†æå®Œæˆ');
                        displayResult(data.data);
                        addLog('âœ… åˆ†æå®Œæˆ');
                        eventSource.close();
                        resetUI();
                        break;

                    case 'error':
                        addLog(`âŒ é”™è¯¯: ${data.error}`);
                        alert(`åˆ†æå¤±è´¥: ${data.error}`);
                        eventSource.close();
                        resetUI();
                        break;
                }
            });

            eventSource.onerror = (error) => {
                updateConnectionStatus(false);
                addLog('âŒ SSEè¿æ¥é”™è¯¯');
                eventSource.close();
            };
        }

        // WebSocketç›‘å¬
        function startWebSocketMonitoring(apiBaseUrl, taskId) {
            const wsUrl = apiBaseUrl.replace('http', 'ws') + '/ws';
            addLog(`è¿æ¥WebSocket: ${wsUrl}`);

            ws = new WebSocket(wsUrl);

            ws.onopen = () => {
                updateConnectionStatus(true);
                addLog('WebSocketè¿æ¥æˆåŠŸ');

                // è®¢é˜…ä»»åŠ¡
                ws.send(JSON.stringify({
                    type: 'subscribe_task',
                    task_id: taskId
                }));
            };

            ws.onmessage = (event) => {
                const data = JSON.parse(event.data);

                switch (data.type) {
                    case 'task_subscribed':
                        addLog(`å·²è®¢é˜…ä»»åŠ¡: ${taskId}`);
                        break;

                    case 'task_progress':
                        updateProgress(data.progress, data.message);
                        addLog(`è¿›åº¦: ${data.progress}% - ${data.message}`);
                        break;

                    case 'task_complete':
                        updateProgress(100, 'åˆ†æå®Œæˆ');
                        displayResult(data.result);
                        addLog('âœ… åˆ†æå®Œæˆ');
                        ws.close();
                        resetUI();
                        break;

                    case 'task_error':
                        addLog(`âŒ é”™è¯¯: ${data.error}`);
                        alert(`åˆ†æå¤±è´¥: ${data.error}`);
                        ws.close();
                        resetUI();
                        break;
                }
            };

            ws.onerror = (error) => {
                updateConnectionStatus(false);
                addLog('âŒ WebSocketè¿æ¥é”™è¯¯');
            };

            ws.onclose = () => {
                updateConnectionStatus(false);
                addLog('WebSocketè¿æ¥å…³é—­');
            };
        }

        // è½®è¯¢ç›‘å¬
        function startPollingMonitoring(apiBaseUrl, taskId) {
            addLog('å¼€å§‹è½®è¯¢ä»»åŠ¡çŠ¶æ€...');

            pollingInterval = setInterval(async () => {
                try {
                    const response = await fetch(`${apiBaseUrl}/api/v1/agents/tasks/${taskId}`);
                    const { data } = await response.json();

                    statusDisplay.textContent = data.status;
                    updateProgress(data.progress, data.progress_messages[data.progress_messages.length - 1]?.message || 'å¤„ç†ä¸­...');

                    if (data.status === 'completed') {
                        clearInterval(pollingInterval);
                        displayResult(data.result);
                        addLog('âœ… åˆ†æå®Œæˆ');
                        resetUI();
                    } else if (data.status === 'failed') {
                        clearInterval(pollingInterval);
                        addLog(`âŒ é”™è¯¯: ${data.error}`);
                        alert(`åˆ†æå¤±è´¥: ${data.error}`);
                        resetUI();
                    }

                } catch (error) {
                    addLog(`è½®è¯¢é”™è¯¯: ${error.message}`);
                }
            }, 2000); // æ¯2ç§’è½®è¯¢ä¸€æ¬¡
        }

        // å–æ¶ˆä»»åŠ¡
        async function cancelTask() {
            if (!currentTaskId) return;

            try {
                const apiBaseUrl = apiBaseUrlInput.value;
                const response = await fetch(`${apiBaseUrl}/api/v1/agents/tasks/${currentTaskId}`, {
                    method: 'DELETE'
                });

                const data = await response.json();

                if (data.success) {
                    addLog('âœ… ä»»åŠ¡å·²å–æ¶ˆ');
                } else {
                    addLog('âŒ å–æ¶ˆä»»åŠ¡å¤±è´¥');
                }

                // æ¸…ç†è¿æ¥
                if (eventSource) eventSource.close();
                if (ws) ws.close();
                if (pollingInterval) clearInterval(pollingInterval);

                resetUI();

            } catch (error) {
                addLog(`å–æ¶ˆä»»åŠ¡é”™è¯¯: ${error.message}`);
            }
        }

        // æŸ¥çœ‹æ‰€æœ‰ä»»åŠ¡
        async function listTasks() {
            try {
                const apiBaseUrl = apiBaseUrlInput.value;
                const response = await fetch(`${apiBaseUrl}/api/v1/agents/tasks?limit=10`);
                const { data } = await response.json();

                addLog(`æŸ¥è¯¢åˆ° ${data.length} ä¸ªä»»åŠ¡`);

                if (data.length > 0) {
                    const taskList = data.map(task =>
                        `[${task.status}] ${task.symbol} - ${task.progress}%`
                    ).join('\n');
                    alert(`æœ€è¿‘ä»»åŠ¡:\n\n${taskList}`);
                } else {
                    alert('æš‚æ— ä»»åŠ¡');
                }

            } catch (error) {
                addLog(`æŸ¥è¯¢ä»»åŠ¡é”™è¯¯: ${error.message}`);
            }
        }

        // æ˜¾ç¤ºç»“æœ
        function displayResult(result) {
            if (!result) return;

            resultContainer.classList.add('active');

            // æ‘˜è¦
            const summary = document.getElementById('summaryDisplay');
            summary.innerHTML = `
                <div class="agent-card">
                    <h3>ğŸ“ˆ ç»¼åˆä¿¡å·</h3>
                    <span class="direction ${result.aggregated_signal.direction}">${result.aggregated_signal.direction.toUpperCase()}</span>
                    <span>ç½®ä¿¡åº¦: ${(result.aggregated_signal.confidence * 100).toFixed(0)}%</span>
                    <p style="margin-top:10px;">åŒæ„çš„Agentæ•°: ${result.aggregated_signal.num_agreeing_agents}</p>
                </div>

                <div class="agent-card">
                    <h3>ğŸ¤– LLMåˆ†æ</h3>
                    <p><strong>æ¨èæ–¹å‘:</strong> <span class="direction ${result.llm_analysis.recommended_direction}">${result.llm_analysis.recommended_direction.toUpperCase()}</span></p>
                    <p><strong>ç½®ä¿¡åº¦:</strong> ${(result.llm_analysis.confidence * 100).toFixed(0)}%</p>
                    <p><strong>æ¨ç†:</strong> ${result.llm_analysis.reasoning}</p>
                    <p><strong>é£é™©è¯„åˆ†:</strong> ${(result.llm_analysis.risk_score * 100).toFixed(0)}%</p>
                </div>
            `;

            // Agentåˆ†æ
            const agents = document.getElementById('agentsDisplay');
            agents.innerHTML = Object.entries(result.agent_results).map(([name, data]) => `
                <div class="agent-card">
                    <h3>${name.toUpperCase()}</h3>
                    <span class="direction ${data.direction}">${data.direction.toUpperCase()}</span>
                    <span>ç½®ä¿¡åº¦: ${(data.confidence * 100).toFixed(0)}%</span>
                    <p style="margin-top:10px;">${data.reasoning}</p>
                </div>
            `).join('');

            // åŸå§‹æ•°æ®
            document.getElementById('rawDataDisplay').textContent = JSON.stringify(result, null, 2);
        }

        // é‡ç½®UI
        function resetUI() {
            startBtn.disabled = false;
            cancelBtn.disabled = true;
            updateConnectionStatus(false);
            currentTaskId = null;
        }

        // äº‹ä»¶ç›‘å¬
        startBtn.addEventListener('click', startAnalysis);
        cancelBtn.addEventListener('click', cancelTask);
        listTasksBtn.addEventListener('click', listTasks);

        // åˆå§‹åŒ–æ—¥å¿—
        addLog('æ¼”ç¤ºé¡µé¢å·²åŠ è½½');
        addLog('è¯·è¾“å…¥è‚¡ç¥¨ä»£ç å¹¶ç‚¹å‡»"å¼€å§‹åˆ†æ"');
    </script>
</body>
</html>
