# HiddenGem 任务看板

> 快速查看和更新任务状态

## 📊 任务总览

| Instance | 任务 | 状态 | 进度 | 更新时间 |
|----------|------|------|------|---------|
| #1 | RL引擎集成FinRL | 🔄 进行中 | 0% | 2025-01-09 |
| #2 | 回测系统 | ⏸️ 待开始 | 0% | - |
| #3 | Paper Trading | ⏸️ 待开始 | 0% | - |
| #4 | 东财模拟盘 | ⏸️ 待开始 | 0% | - |
| #5 | 东财真实盘 | ⏸️ 待开始 | 0% | - |
| #6 | 性能监控 | ⏸️ 待开始 | 0% | - |

---

## Instance #1: RL引擎集成FinRL 🔴

**负责人**: Instance #1
**优先级**: P0 (Critical)
**状态**: 🔄 进行中

### 子任务清单

- [ ] 1.1 扩展FinRL环境 (3天)
  - [ ] 创建`LLMEnhancedTradingEnv`类
  - [ ] 实现`_get_observation()`方法
  - [ ] 集成TradingAgents信号
  - [ ] 集成Memory检索
  - [ ] 编写单元测试

- [ ] 1.2 自定义奖励函数 (2天)
  - [ ] 实现基础收益奖励
  - [ ] 实现CVaR风险惩罚
  - [ ] 实现市场波动惩罚
  - [ ] 实现交易成本计算
  - [ ] 验证奖励合理性

- [ ] 1.3 数据准备 (2天)
  - [ ] 实现数据获取函数
  - [ ] 转换为FinRL格式
  - [ ] 添加技术指标
  - [ ] 实现数据分割（train/val/test）

- [ ] 1.4 训练脚本 (3天)
  - [ ] 初始化各个组件
  - [ ] 实现训练循环
  - [ ] 实现模型保存/加载
  - [ ] 实现验证集评估
  - [ ] 添加TensorBoard日志

**依赖**: 无
**阻塞**: 无
**预计完成**: 2025-01-23

---

## Instance #2: 回测系统 🟠

**负责人**: Instance #2
**优先级**: P1 (High)
**状态**: ⏸️ 待开始

### 子任务清单

- [ ] 2.1 回测引擎 (3天)
  - [ ] 创建`Backtester`类
  - [ ] 实现回测循环
  - [ ] 处理交易成本和滑点
  - [ ] 生成回测报告

- [ ] 2.2 性能指标计算 (2天)
  - [ ] 实现夏普比率
  - [ ] 实现最大回撤
  - [ ] 实现卡玛比率
  - [ ] 实现胜率计算

- [ ] 2.3 回测报告生成 (2天)
  - [ ] 生成HTML报告
  - [ ] 生成JSON报告
  - [ ] 添加可视化图表

**依赖**: Task 1 完成
**阻塞**: 等待Task 1
**预计完成**: TBD

---

## Instance #3: Paper Trading系统 🟠

**负责人**: Instance #3
**优先级**: P1 (High)
**状态**: ⏸️ 待开始

### 子任务清单

- [ ] 3.1 模拟交易引擎 (4天)
  - [ ] 创建`PaperTradingEngine`类
  - [ ] 实现实时数据获取
  - [ ] 实现RL决策循环
  - [ ] 实现订单生成和执行
  - [ ] 添加启动/停止控制

- [ ] 3.2 实时市场数据源 (3天)
  - [ ] 创建`RealTimeMarketFeed`类
  - [ ] 实现实时行情获取
  - [ ] 实现数据缓存
  - [ ] 处理API限流

- [ ] 3.3 模拟订单执行 (2天)
  - [ ] 创建`SimulatedBroker`类
  - [ ] 实现市价单执行
  - [ ] 实现限价单执行
  - [ ] 模拟滑点和手续费

- [ ] 3.4 Paper Trading API (2天)
  - [ ] 实现启动/停止API
  - [ ] 实现状态查询API
  - [ ] 实现持仓查询API

**依赖**: Task 1 完成
**阻塞**: 等待Task 1
**预计完成**: TBD

---

## Instance #4: 东财模拟盘 🟡

**负责人**: Instance #4
**优先级**: P2 (Medium)
**状态**: ⏸️ 待开始

### 子任务清单

- [ ] 4.1 东财模拟盘SDK集成 (3天)
  - [ ] 研究东财模拟盘接入方案
  - [ ] 实现登录功能
  - [ ] 实现订单提交
  - [ ] 实现持仓查询
  - [ ] 实现撤单功能

- [ ] 4.2 适配Paper Trading接口 (2天)
  - [ ] 创建适配器类
  - [ ] 转换订单格式
  - [ ] 转换持仓格式

**依赖**: Task 3 完成
**阻塞**: 等待Task 3
**预计完成**: TBD

---

## Instance #5: 东财真实盘 🔵

**负责人**: Instance #5
**优先级**: P3 (Low)
**状态**: ⏸️ 待开始

### ⚠️ 前置条件（必须全部满足）

- [ ] Task 4 (模拟盘) 稳定运行 ≥ 1个月
- [ ] 回测年化收益率 > 20%
- [ ] 模拟盘收益率 > 15% (≥3个月)
- [ ] 最大回撤 < 10%
- [ ] 胜率 > 60%
- [ ] 通过完整风控测试
- [ ] **用户明确书面授权** ✅

### 子任务清单

- [ ] 5.1 东财真实盘SDK集成 (3天)
  - [ ] 集成easytrader
  - [ ] 实现安全检查
  - [ ] 实现人工确认机制
  - [ ] 实现紧急停止功能

- [ ] 5.2 多层风控系统 (2天)
  - [ ] 实现日内亏损检查
  - [ ] 实现总亏损检查
  - [ ] 实现仓位限制检查
  - [ ] 实现订单大小检查

**依赖**: Task 4 完成并充分验证
**阻塞**: 等待Task 4 + 前置条件
**预计完成**: TBD

---

## Instance #6: 性能监控 🟠

**负责人**: Instance #6
**优先级**: P1 (High)
**状态**: ⏸️ 待开始

### 子任务清单

- [ ] 6.1 实时性能追踪 (3天)
  - [ ] 创建`RealTimePerformanceTracker`类
  - [ ] 实现实时指标计算
  - [ ] 实现异常检测
  - [ ] 实现告警功能

- [ ] 6.2 可视化Dashboard (3天)
  - [ ] 实现Dashboard API
  - [ ] 返回权益曲线数据
  - [ ] 返回回撤曲线数据
  - [ ] 返回交易明细
  - [ ] 性能优化（缓存）

**依赖**: Task 2, Task 3
**阻塞**: 等待Task 2, 3
**预计完成**: TBD

---

## 🚨 当前问题

| ID | 任务 | 问题描述 | 影响 | 状态 |
|----|------|---------|------|------|
| - | - | 暂无问题 | - | - |

---

## 📋 每日更新模板

Instance请在此更新每日进度：

### 2025-11-09 (Instance #1)

**完成**:
- [x] Task 1.1: 扩展FinRL环境（100%完成）
  - [x] 1.1.5: 编写单元测试（6个测试用例，164行）
- [x] 安装测试依赖：sentence-transformers

**今日计划**:
- [x] Task 1.1: 扩展FinRL环境
- [ ] 明天继续: Task 1.2 自定义奖励函数、Task 1.3 数据准备、Task 1.4 训练脚本

**遇到问题**:
- ⚠️ 单元测试存在gym/gymnasium API兼容性问题（环境使用gym.Env但API期望gymnasium格式）
- ✅ 解决方案：已编写测试框架，后续迁移到gymnasium或调整测试

---

### 2025-01-09 (Instance #1)

**完成**:
- [x] 创建任务分配文档（PARALLEL_TASKS.md, TASK_BOARD.md, INSTANCE_GUIDE.md）
- [x] 创建工作分支 task-1-rl-engine
- [x] 安装依赖（stable-baselines3, gym, gymnasium）
- [x] 实现LLMEnhancedTradingEnv类（600+行）
  - [x] 整合TradingAgents LLM信号
  - [x] 整合Memory系统检索
  - [x] 实现CVaR风险约束奖励函数
  - [x] 支持离散动作空间（6个动作）

**今日计划**:
- [x] Task 1.1: 扩展FinRL环境（80%完成）
- [ ] 明天继续: 单元测试、数据准备、训练脚本

**遇到问题**:
- ❌ FinRL安装失败（网络问题）
- ✅ 解决方案：参考FinRL设计，基于gym.Env自己实现

---

### 2025-01-XX (Instance #X)

**完成**:
- [ ] ...

**今日计划**:
- [ ] ...

**遇到问题**:
- ...

---

## 📞 协作沟通

### 问题咨询流程

1. 先查看`PARALLEL_TASKS.md`完整文档
2. 在此文件的"当前问题"表格中记录
3. 标注`[BLOCKED]`并@相关Instance
4. 等待回复或协商解决

### 接口变更通知

如需修改接口，请在此记录：

| 日期 | 修改者 | 接口 | 变更内容 | 影响任务 |
|------|--------|------|---------|---------|
| - | - | - | - | - |

---

**维护**: 所有Instance
**更新频率**: 每日
**详细文档**: `PARALLEL_TASKS.md`
